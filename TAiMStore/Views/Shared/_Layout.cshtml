@using TAiMStore.Model
@model TAiMStore.Model.ViewModels.MasterPageModel
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" href="~/Content/bootstrap.css" rel="stylesheet" />
    <title>@ViewBag.Title</title>
    <link href="~/Content/bootstrap-theme.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="navbar navbar-inverse" role="navigation">
            <a class="navbar-brand" href="#">Интернет-магазин @ConstantStrings.NameCompany</a>
            @if (!(Model.UserModel == null || Model.UserModel.Name == null))
            {
                @Html.Action("Summary", "Cart")
            }
        </div>
    </header>
    <nav class="navbar navbar-default" role="navigation">
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav nav-tabs">
                <li class="active">@Html.ActionLink("Главная", "List", "Product") </li>
                <li>@Html.ActionLink("Регистрация", "Register", "Account") </li>
            </ul>
            @if (Model.UserModel == null || Model.UserModel.Name == null)
            {
                <div class="navbar-form navbar-left" role="Login">
                    @using (Html.BeginForm("Login", "Account", FormMethod.Post))
                    {
                        <div class="navbar-form navbar-left">
                            <div class="input-group">
                                <span title="Запомнить?" class="input-group-addon">
                                    @Html.CheckBox("rememberMe", false)
                                </span>
                                <input placeholder="Пользователь" class="form-control" @Html.TextBox("userName", "")
                            </div>
                        </div>
                        <div class="navbar-form navbar-left">
                            <div class="form-group">
                                <input class="form-control" placeholder="Пароль" @Html.Password("Password", "")
                            </div>
                            <button type="submit" class="btn btn-default">Войти</button>
                        </div>
                    }
                </div>
            }
            else if (@Model != null && @Model.UserModel != null)
            {
                <table class="right">
                    @if (Model.UserModel.Name != null)
                    {
                        <tbody style="right">
                            <tr class="text-right">
                                <td>Добро пожаловать @Html.Label(Model.UserModel.Name)</td>
                            </tr>
                            <tr class="text-right">
                                <td>@Html.ActionLink("Выйти", "LogOff", "Account")</td>
                            </tr>
                        </tbody>
                    }                    
                </table>
            }
        </div>
    </nav>
    <div class="row panel">
        <div class="col-sm-3 col-md-3 sidebar">
            <ul title="Меню" role="menu">
                <ul title="category" id="categories" class="nav nav-sidebar">
                    @Html.Action("Menu", "Nav")
                </ul>
                @if (@Model != null && @Model.UserModel != null)
                {
                    <ul title="user-menu" id="user" class="nav nav-sidebar">
                        @{
                    Html.RenderAction("UserMenu", "Account");
                        }
                    </ul>
                }
                @if (Model.UserRole == ConstantStrings.AdministratorRole)
                {
                    <ul title="admin" id="admin" class="nav nav-sidebar">
                    @{
                        Html.RenderAction("_AdminMenu", "Admin");
                    }
                    </ul>
                }
        </div>
        <div>
            <h2>@RenderSection("Title", false)</h2>
            <div class="col-xs-8">
                @RenderBody()
            </div>
        </div>
    </div>
    <footer>
        <div>
            <p align="center">&copy; @DateTime.Now.Year - @ConstantStrings.NameCompany</p>
        </div>
    </footer>
</body>
</html>